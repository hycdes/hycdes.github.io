<!DOCTYPE html>
<html lang="zh">

    <head>
        <style type="text/css">
            img{ height:100%; width:100%;}
        </style>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Linux/Docker-by 命运の乐章</title>

        <!-- Bootstrap Core CSS -->
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- MetisMenu CSS -->
        <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">
        <!-- Custom CSS -->
        <link href="../dist/css/sb-admin-2.css" rel="stylesheet">
        <!-- Morris Charts CSS -->
        <link href="../vendor/morrisjs/morris.css" rel="stylesheet">
        <!-- Custom Fonts -->
        <link href="../vendor/font-awesome/css/font-awesome.min.css"
            rel="stylesheet" type="text/css">
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    </head>

    <body>

        <div id="wrapper">
            <!-- Navigation -->
            <nav class="navbar navbar-default navbar-static-top"
                role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle"
                        data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="welcome.html"><span
                            style="color:#FF0066">技术类笔记</span> by hycdes
                        (Technical notes by hycdes)</a>
                </div>

                <!-- DropDown (up-right) -->
                <ul class="nav navbar-top-links navbar-right">
                    <!-- Drop down 1 (up-right) -->
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown"
                            href="#">
                            <i class="fa fa-exchange fa-fw"></i> <i class="fa
                                fa-caret-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-messages">
                            <li>
                                <a href="index.html">
                                    <div>
                                        <strong>技术类笔记</strong>
                                        <span class="pull-right text-muted">
                                            <em>Site#1</em>
                                        </span>
                                    </div>
                                    <div>Technical notes</div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="index2.html">
                                    <div>
                                        <strong>教程类</strong>
                                        <span class="pull-right text-muted">
                                            <em>Site#2</em>
                                        </span>
                                    </div>
                                    <div>Tutorials</div>
                                </a>
                            </li>
                        </ul>
                        <!-- /.dropdown-messages -->
                    </li>
                </ul>

                <!-- NaviBar (Left) -->
                <div class="navbar-default sidebar" role="navigation">
                    <div class="sidebar-nav navbar-collapse">
                        <ul class="nav" id="side-menu">
                            <li class="sidebar-search">
                                <div class="input-group custom-search-form">
                                    <input type="text" class="form-control"
                                        placeholder="Search...">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default"
                                            type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                                <!-- /input-group -->
                            </li>

                            <!-- [NAVI]Home -->
                            <li>
                                <a href="index.html"><i class="fa fa-home
                                        fa-fw"></i> 主页 Home</a>
                            </li>

                            <!-- [NAVI]Note_Linux -->
                            <li>
                                <a href="#"><i class="fa fa-linux fa-fw"></i>
                                    Linux<span class="fa arrow"></span></a>
                                <ul class="nav nav-second-level">
                                    <li>
                                        <a href="Note_Linux_Basis.html">Terminal
                                            basis</a>
                                    </li>
                                    <li>
                                        <a href="Note_Linux_pktgen.html">pktgen</a>
                                    </li>
                                    <li>
                                        <a href="Note_Linux_Docker.html">Docker</a>
                                    </li>
                                </ul>
                            </li>

                            <!-- [NAVI]Note_git -->
                            <li>
                                <a href="Note_git.html"><i class="fa fa-github
                                        fa-fw"></i> git</a>
                            </li>

                            <!-- [NAVI]Note_git -->
                            <li>
                                <a href="Note_C++.html"><i class="fa
                                        fa-file-code-o
                                        fa-fw"></i> C++</a>
                            </li>

                        </ul>
                    </div>
                    <!-- /.sidebar-collapse -->
                </div>
                <!-- /.navbar-static-side -->
            </nav>
            <!-- Main Pages -->
            <div id="page-wrapper">
                <div class="container-fluid">

                    <div class="row">
                        <div class="col-lg-12">
                            <h1 class="page-header">Linux/Docker</h1>
                        </div>
                        <!--docker install-->
                        <div class="col-lg-6">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    docker安装
                                </div>
                                <div class="panel-body">
                                    <p><b>官网教程</b></p>
                                    <p>&nbsp&nbsp&nbsp&nbsp<a
                                            href="https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-repository"
                                            target="_blank">https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-repository</a></p>
                                    <p><b>更新包库</b></p>
                                    <p>apt-get update</p>
                                    <p><b>安装包以允许通过HTTPS使用存储库</b></p>
                                    <p>apt-get install apt-transport-https
                                        ca-certificates curl
                                        software-properties-common</p>
                                    <p><b>安装curl（搜curl，wget下载gz，解压make）</b></p>
                                    <span style="color:deeppink"><p>* curl
                                            --version检查是否安装成功，如果报错说"...libcurl.so.4:...No
                                            such file or directory"</p>
                                        <p>&nbsp 那么 vim
                                            /etc/ld.so.conf ，添加：</p>
                                        <p>/usr/local/lib</p>
                                        <p>/usr/lib</p>
                                        <p>/lib</p>
                                        <p>&nbsp 然后
                                            /sbin/ldconfig -v生效</p>
                                        <p>* 如果在curl
                                            ./configure显示protocol没有https，需要先下载安装最新openssl</p>
                                        <p><a
                                                href="https://www.openssl.org/source/"
                                                target="_blank">https://www.openssl.org/source/</a></p>
                                    </span>
                                    <p><b>添加Docker’s官方GPG key:</b></p>
                                    <p>curl -fsSL
                                        https://download.docker.com/linux/ubuntu/gpg
                                        | sudo apt-key add -</p>
                                    <p><b>用指纹验证官方密钥9DC8 5822 9FC7 DD38 854A E2D8
                                            8D81 803C 0EBF CD88</b></p>
                                    <p>apt-key fingerprint 0EBFCD88</p>
                                    <p><b>设置stable存储库</b></p>
                                    <p>add-apt-repository \</p>
                                    <p>"deb [arch=amd64]
                                        https://download.docker.com/linux/ubuntu
                                        $(lsb_release -cs) stable"</p>
                                    <p><b>更新包库</b></p>
                                    <p>apt-get update</p>
                                    <p><b>安装docker-ce</b></p>
                                    <p>apt-get install docker-ce</p>
                                    <p><b>运行docker，例如运行展示用的hello-world</b></p>
                                    <p>docker run <span style="color:darkgrey">IMAGE_NAME</span></p>
                                    <p>docker run hello-world</p>
                                </div>
                                <div class="panel-footer">
                                    docker:install
                                </div>
                            </div>
                        </div>
                        <!--docker configure-->
                        <div class="col-lg-6">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    docker设置和运行
                                </div>
                                <div class="panel-body">
                                    <p><b>设置和运行</b></p>
                                    <p>&nbsp&nbsp&nbsp&nbsp<a
                                            href="https://docs.docker.com/config/daemon/#start-the-daemon-using-operating-system-utilities"
                                            target="_blank">https://docs.docker.com/config/daemon/#start-the-daemon-using-operating-system-utilities</a></p>
                                </div>
                                <div class="panel-footer">
                                    docker:configure
                                </div>
                            </div>
                        </div>
                        <!--docker basis-->
                        <div class="col-lg-6">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    docker基本命令（先su）
                                </div>
                                <div class="panel-body">
                                    <p><b>运行镜像</b></p>
                                    <p>docker run <span style="color:darkgrey">IMAGE_NAME</span></p>
                                    <p>docker run hello-world<span
                                            style="color:green"> #
                                            docker自带hello-world例子</span></p>
                                    <p><b>查看运行的容器</b></p>
                                    <p>docker ps -a</p>
                                    <p><a href="../img/img_docker_1.png"
                                            target="_blank"><img
                                                src="../img/img_docker_1.png"
                                                alt="docker ps -a"></a></p>
                                    <p><b>进入运行的容器</b></p>
                                    <p>docker attach <span
                                            style="color:darkgrey">NAME_or_ID</span></p>
                                    <p><b>删除容器（必须停止运行才能删除）</b></p>
                                    <p>docker rm <span style="color:darkgrey">NAME</span></p>
                                </div>
                                <div class="panel-footer">
                                    docker:configure
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <h1 class="page-header">Linux/Docker/Nginx</h1>
                        </div>
                        <!--Nginx install-->
                        <div class="col-lg-6">
                            <div class="panel panel-yellow">
                                <div class="panel-heading">
                                    Nginx安装
                                </div>
                                <div class="panel-body">
                                    <p><b>在docker hub中查找nginx镜像（先su）</b></p>
                                    <p>docker search nginx</p>
                                    <p><b>列表里排行第一的即所需nginx，拉取镜像</b></p>
                                    <p>docker pull nginx</p>
                                    <p><b>下载完后，在本地镜像列表里就能找到nginx</b></p>
                                    <p>docker images nginx</p>
                                </div>
                                <div class="panel-footer">
                                    Nginx:install
                                </div>
                            </div>
                        </div>
                        <!--Nginx configure-->
                        <div class="col-lg-6">
                            <div class="panel panel-yellow">
                                <div class="panel-heading">
                                    Nginx设置和运行
                                </div>
                                <div class="panel-body">
                                    <p><b>运行nginx</b></p>
                                    <p>docker run --name <span
                                            style="color:darkgrey">NAME</span>
                                        -d -p
                                        <span style="color:darkgrey">LOCAL_MACHINE_PORT:INTERNAL_CONTAINER_PORT</span>
                                        -v <span style="color:darkgrey">LINK_FILE:CONTAINER_FILE</span>
                                        nginx</p>
                                    <p>docker run --name docker-nginx -d -p
                                        8080:80 -v
                                        ~/docker-nginx/html:/usr/share/nginx/html
                                        nginx</p>
                                    <p><b>使用Ctrl+C终止</b></p>
                                    <p><span style="color:green"># -d独立运行
                                            -p暴露容器端口(80为HTTP端口) -v将其他页面链接到容器页面</span></p>
                                </div>
                                <div class="panel-footer">
                                    Nginx:configure
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <h1 class="page-header">Linux/Docker/Snort</h1>
                        </div>
                        <!--Snort install-->
                        <div class="col-lg-6">
                            <div class="panel panel-red">
                                <div class="panel-heading">
                                    Snort安装
                                </div>
                                <div class="panel-body">
                                    <p><b>在docker hub中查找nginx镜像（先su）</b></p>
                                    <p>docker search snort</p>
                                </div>
                                <div class="panel-footer">
                                    Snort:install
                                </div>
                            </div>
                        </div>
                        <!--Snort configure-->
                        <div class="col-lg-6">
                            <div class="panel panel-red">
                                <div class="panel-heading">
                                    Snort设置和运行
                                </div>
                                <div class="panel-body">
                                    <p><b>将snort连接到docker中以完全访问网络</b></p>
                                    <p>docker run --name snortSample -it --rm
                                        --net=host linton/docker-snort /bin/bash</p>
                                    <p><b>进入bash，退出方法</b></p>
                                    <p>exit</p>
                                    <p><b>运行Snort并将输出警告输出到控制台</b></p>
                                    <p>snort -i ens33 -c
                                        /etc/snort/etc/snort.conf -A console</p>
                                    <p><b>运行Snort并将输出警告输出到UNIX socket</b></p>
                                    <p>snort -i ens33 -A unsock -l /tmp -c
                                        /etc/snort/etc/snort.conf</p>
                                </div>
                                <div class="panel-footer">
                                    Snort:configure
                                </div>
                            </div>
                        </div>
                        <!--Snort rules-->
                        <div class="col-lg-6">
                            <div class="panel panel-red">
                                <div class="panel-heading">
                                    Snort规则
                                </div>
                                <div class="panel-body">
                                    <p><b>规则存放路径</b></p>
                                    <p>/etc/snort/rules/local.rules</p>
                                    <p><b>规则格式</b></p>
                                    <p>ACTION PROTOCOL IP/cidr PORT <span
                                            style="color: blue">DIRECT</span>
                                        IP/cidr PORT (RULE1; RULE2...)</p>
                                    <p><b>举例：</b>alert tcp any any ->
                                        192.168.1.0/24 111 (content:"|00 01 86
                                        a5|"; msg: "mountd access";)</p>
                                    <p><b>1. 规则动作<span style="color:darkgrey">ACTION</span></b></p>
                                    <p>&nbsp&nbsp&nbspalert：使用选择的报警方法生成一个警报，然后记录（log）这个包</p>
                                    <p>&nbsp&nbsp&nbsplog：记录这个包</p>
                                    <p>&nbsp&nbsp&nbsppass：丢弃这个包</p>
                                    <p>&nbsp&nbsp&nbspactivate：报警并且激活另一条dynamic规则，规则选项包含
                                        activates: NUM</p>
                                    <p>&nbsp&nbsp&nbspdynamic：保持空闲直到activate激活，规则选项包含对应的
                                        activated_by: NUM，被激活后作为log规则执行</p>
                                    <p><b>2. 协议<span style="color:darkgrey">PROTOCOL</span></b></p>
                                    <p>tcp/udp/icmp/ip</p>
                                    <p><b>3. IP地址/cidr块<span
                                                style="color:darkgrey">IP/cidr</span></b></p>
                                    <p>&nbsp&nbsp&nbspIP=any表任何地址</p>
                                    <p>&nbsp&nbsp&nbspsnort没有提供根据ip地址查询域名机制，地址就是由直接的数字型ip地址和一个cidr块组成</p>
                                    <p>&nbsp&nbsp&nbspcidr=/24：c类网络，/16：b类网络，/32：特定机器IP</p>
                                    <p>&nbsp&nbsp&nbsp可运用非运算符，例如
                                        !192.168.1.0/24，也可以用区间，例如[192.168.1.0/24,10.1.1.0/24]</p>
                                    <p>&nbsp&nbsp&nbsp<span
                                            style="color:hotpink">*
                                            A类IP段：0.0.0.0 ~ 127.255.255.255</span></p>
                                    <p>&nbsp&nbsp&nbsp<span
                                            style="color:hotpink">*
                                            B类IP段：128.0.0.0 ~ 191.255.255.255</span></p>
                                    <p>&nbsp&nbsp&nbsp<span
                                            style="color:hotpink">*
                                            C类IP段：192.0.0.0 ~ 223.255.255.255</span></p>
                                    <p><b>4. 端口号<span style="color:darkgrey">PORT</span></b></p>
                                    <p>&nbsp&nbsp&nbspPORT=any表任何，111：portmapper，23：telnet，80：http，443：https</p>
                                    <p>&nbsp&nbsp&nbsp可运用:表范围，例如
                                        :1000=0~1000，500:=大于等于500，100:600=100~600，也可运用非运算符</p>
                                    <p><b>5. 方向<span style="color:blue">DIRECT</span></b></p>
                                    <p>&nbsp&nbsp&nbsp-&#62/&#60-单向，&#60&#62双向</p>
                                    <p><b>6. 规则选项<span style="color:darkgrey">RULES</span></b></p>
                                    <p>msg - 在报警和包日志中打印一个消息</p>
                                    <p>logto - 把包记录到用户指定的文件中而不是记录到标准输出</p>
                                    <p>ttl - 检查ip头的ttl的值</p>
                                    <p>tos 检查IP头中TOS字段的值</p>
                                    <p>id - 检查ip头的分片id值</p>
                                    <p>ipoption 查看IP选项字段的特定编码</p>
                                    <p>fragbits 检查IP头的分段位</p>
                                    <p>dsize - 检查包的净荷尺寸的值 </p>
                                    <p>flags -检查tcp flags的值</p>
                                    <p>seq - 检查tcp顺序号的值</p>
                                    <p>ack - 检查tcp应答（acknowledgement）的值</p>
                                    <p>window 测试TCP窗口域的特殊值</p>
                                    <p>itype - 检查icmp type的值</p>
                                    <p>icode - 检查icmp code的值</p>
                                    <p>icmp_id - 检查ICMP ECHO ID的值</p>
                                    <p>icmp_seq - 检查ICMP ECHO 顺序号的值</p>
                                    <p>content - 在包的净荷中搜索指定的样式</p>
                                    <p>content-list 在数据包载荷中搜索一个模式集合</p>
                                    <p>offset - content选项的修饰符，设定开始搜索的位置 </p>
                                    <p>depth - content选项的修饰符，设定搜索的最大深度</p>
                                    <p>nocase - 指定对content字符串大小写不敏感</p>
                                    <p>session - 记录指定会话的应用层信息的内容</p>
                                    <p>rpc - 监视特定应用/进程调用的RPC服务</p>
                                    <p>resp - 主动反应（切断连接等）</p>
                                    <p>react - 响应动作（阻塞web站点）</p>
                                    <p>reference - 外部攻击参考ids</p>
                                    <p>sid - snort规则id</p>
                                    <p>rev - 规则版本号</p>
                                    <p>classtype - 规则类别标识</p>
                                    <p>priority - 规则优先级标识号</p>
                                    <p>uricontent - 在数据包的URI部分搜索一个内容</p>
                                    <p>tag - 规则的高级记录行为</p>
                                    <p>ip_proto - IP头的协议字段值</p>
                                    <p>sameip - 判定源IP和目的IP是否相等</p>
                                    <p>stateless - 忽略刘状态的有效性</p>
                                    <p>regex - 通配符模式匹配</p>
                                    <p>within - 强迫关系模式匹配所在的范围</p>
                                    <p>byte_test - 数字模式匹配</p>
                                    <p>byte_jump - 数字模式测试和偏移量调整</p>
                                </div>
                                <div class="panel-footer">
                                    Snort:rules
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

        </div>
        <!-- /#wrapper -->

        <!-- jQuery -->
        <script src="../vendor/jquery/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../vendor/metisMenu/metisMenu.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="../dist/js/sb-admin-2.js"></script>

    </body>

</html>